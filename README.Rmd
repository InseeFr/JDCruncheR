---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
    collapse = TRUE,
    comment = "#>",
    fig.align = "center",
    fig.path = "README-"
)
```

# **{JDCruncheR}** <a href="https://inseefr.github.io/JDCruncheR/"><img src="man/figures/logo.png" align="right" height="150" style="float:right; height:150px;"/></a>

<!-- badges: start -->
[![CRAN status](https://www.r-pkg.org/badges/version/JDCruncheR)](https://cran.r-project.org/package=JDCruncheR)
[![Linting code](https://github.com/InseeFr/JDCruncheR/actions/workflows/lint.yaml/badge.svg)](https://github.com/InseeFr/JDCruncheR/actions/workflows/lint.yaml)
[![R-CMD-check](https://github.com/InseeFr/JDCruncheR/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/InseeFr/JDCruncheR/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->


<div align = center>
  
## [üá´üá∑ README en fran√ßais](#pr√©sentation) | [üá¨üáß README in english](#overview)

<div align = left>

### Pr√©sentation

Le but premier du package **{JDCruncheR}** est de fournir un acc√®s rapide et facile au cruncher (`JWSACruncher`) depuis R. Le cruncher est un outil de mise √† jour des workspaces de JDemetra+ sans avoir √† ouvrir la GUI (Graphical User Interface). La derni√®re version peut √™tre t√©l√©charg√©e ici : https://github.com/jdemetra/jwsacruncher/releases. Pour plus d'information, vous pouvez visiter la page [wiki](https://github.com/jdemetra/jwsacruncher/wiki).

Avec **{JDCruncheR}**, vous pouvez aussi g√©n√©rer des *bilans qualit√©* utilisant l'output du cruncher. Ce bilan est un r√©sum√© des diagnostiques de la d√©saisonnalisation. Il peut √™tre utilis√© pour rep√©rer les s√©ries les plus probl√©matiques qui n√©cessitent une analyse plus fine. Cela est tr√®s utile lorsqu'on a beaucoup de s√©ries √† d√©saisonnaliser.

### Installation

**üéâ {JDCruncheR} est maintenant disponible sur le CRAN ! üéâ**

Pour installer, il suffit de lancer la ligne de code suivante :

```{r fr-CRAN-installation, eval = FALSE}
install.packages("JDCruncheR")
```

Pour obtenir la version en cours de d√©veloppement depuis GitHub :

```{r fr-gh-devel-installation, eval = FALSE}
# Si le package remotes n'est pas install√©
# install.packages("remotes")

# Installer la version en cours de d√©veloppement depuis GitHub
remotes::install_github("InseeFr/JDCruncheR")
```

### Usage

#### Chargement du package

```{r fr-loading-JDCruncheR, eval = TRUE}
library("JDCruncheR")
```

#### Changer les seuils des tests statistiques

Les seuils des tests du bilan qualit√© sont personnalisables.
Pour cela, il faut modifier l'option `"jdc_thresholds"`.

Pour r√©cup√©rer les valeurs des tests par d√©fault, il faut appeler la fonction `get_thresholds()` :

```{r fr-get-threshold, eval = TRUE}
get_thresholds("m7", default = TRUE)
get_thresholds(default = TRUE)
```

Pour changer la valeur de l'option, on peut utiliser la fonction `set_thresholds()` :

```{r fr-set-threshold, eval = TRUE}
# Fixer les seuils √† une certaine valeur
set_thresholds(test_name = "m7", thresholds = c(Good = 0.8, Bad = 1.4, Severe = Inf))
get_thresholds(test_name = "m7", default = FALSE)

# Remettre tous les seuils √† leur valeur par d√©faut
set_thresholds()
get_thresholds(test_name = "m7", default = FALSE)
```

#### Changer les notes des modalit√©s `Good`, `Uncertain`, `Bad` et `Severe`

Le m√©canisme est le m√™me que pour les seuils des tests statistiques avec la valeur `"grade"` :

Pour r√©cup√©rer la valeur par d√©fault des notes, il faut appeler la fonction `get_thresholds()` :

```{r fr-get-grade, eval = TRUE}
get_thresholds("grade", default = TRUE)
```

Pour changer la valeur de la note, on peut utiliser la fonction `set_thresholds()` :

```{r fr-set-grade, eval = TRUE}
# Fixer les notes √† une certaine valeur
set_thresholds(test_name = "grade", thresholds = c(Good = 0, Uncertain = 0.1, Bad = 1, Severe = 10))
get_thresholds(test_name = "grade", default = FALSE)
```

### Autres informations

Pour plus d'informations sur l'installation et la configuration du package **{JDCruncheR}**, vous pouvez visiter la page [wiki](https://github.com/jdemetra/jwsacruncher/wiki)

Pour une description plus compl√®te des packages R pour JDemetra+ voir le document de travail Insee [Les packages R pour JDemetra+ : une aide √† la d√©saisonnalisation](https://www.insee.fr/fr/statistiques/5019786)


### Overview

The primary objective of the **{JDCruncheR}** package is to provide a quick and easy access to the JDemetra+ cruncher (`JWSACruncher`) from R. The cruncher is a tool for updating JDemetra+ workspaces, without having to open the graphical user interface. The latest version can be downloaded here: <https://github.com/jdemetra/jwsacruncher/releases>. For more information, please refer to the [wiki page](https://github.com/jdemetra/jwsacruncher/wiki).

With **{JDCruncheR}**, you can also generate a *quality report* based on the cruncher's output. This report is a formatted summary of the seasonal adjustment process master diagnostics and parameters. It can be used to spot the most problematic series which will require a finer analysis. This is most useful when dealing with a large number of series.

### Installation

**üéâ {JDCruncheR} is now available on CRAN! üéâ**

To install it, you have to launch the following command line:

```{r en-CRAN-installation, eval = FALSE}
install.packages("JDCruncheR")
```

To get the current development version from GitHub:

```{r en-gh-devel-installation, eval = FALSE}
# If remotes packages is not installed
# install.packages("remotes")

# Install development version from GitHub
remotes::install_github("InseeFr/JDCruncheR")
```

### Usage

#### Loading the package

```{r en-loading-JDCruncheR, eval = TRUE}
library("JDCruncheR")
```

#### Changing statistical test thresholds

The thresholds of the QR tests can be customised
You have to modify the option `"jdc_thresholds"`.

To get the (default or not) values of the thresholds of the tests, you can call the fonction `get_thresholds()` :

```{r en-get-threshold, eval = TRUE}
get_thresholds("m7")
get_thresholds(default = TRUE)
```

To change the value of the option, you can use the fonction `set_thresholds()`:

```{r en-set-threshold, eval = TRUE}
# Set threshold to imposed value
set_thresholds(test_name = "m7", thresholds = c(Good = 0.8, Bad = 1.4, Severe = Inf))
get_thresholds(test_name = "m7", default = FALSE)

# Reset all thresholds to default
set_thresholds()
get_thresholds(test_name = "m7", default = FALSE)
```

#### Changing the scores for the `Good`, `Uncertain`, `Bad` and `Severe` modalities

The mechanism is the same as for the statistical test thresholds with the `"grade"` value:

To retrieve the default grade value, call the `get_thresholds()` function:

```{r en-get-grade, eval = TRUE}
get_thresholds("grade", default = TRUE)
```

To change the value of the grade, you can use the `set_thresholds()` function:

```{r en-set-grade, eval = TRUE}
# Set grades to a certain value
set_thresholds(test_name = "grade", thresholds = c(Good = 0, Uncertain = 0.1, Bad = 1, Severe = 10))
get_thresholds(test_name = "grade", default = FALSE)
```

### Other informations

For more informations on installing and configuring the **{JDCruncheR}** package, you can visit the [wiki](https://github.com/jdemetra/jwsacruncher/wiki) page.

For a more comprehensive description of the R packages for JDemetra+ check the Insee working paper [R Tools for JDemetra+: Seasonal adjustment made easier](https://www.insee.fr/en/statistiques/5019812)
